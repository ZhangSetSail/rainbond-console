(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"/ybH":function(e,a,t){"use strict";var s=t("g09b"),r=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("IzEo");var n=s(t("bx4M"));t("+L6B");var o=s(t("2/Rp")),l=s(t("jehZ"));t("5NDa");var d=s(t("5rEg"));t("14J3");var i=s(t("BMrR"));t("FJo9");var u=s(t("L41K"));t("y8nQ");var m,p,c,f,g=s(t("Vl3Y")),b=t("MuoO"),h=t("7DNP"),_=s(t("Qyje")),C=r(t("q1tI")),y=t("LLXN"),w=s(t("3a4m")),v=s(t("XZXw")),E=s(t("+iC2")),D=s(t("KrRZ")),x=s(t("2lxJ")),M=s(t("8+Sn")),N=s(t("XZhr")),k=g.default.Item,L=u.default.Step,F={enableHA:!1,gatewayIngressIPs:"",imageHub:{enable:!1,domain:"",namespace:"",username:"",password:""},etcd:{enable:!1,endpoints:[],secretName:""},estorage:{enable:!1,type:"",RWX:{enable:!1,config:{server:"",storageClassName:""}},RWO:{enable:!1,storageClassName:""},NFS:{enable:!1,server:"",path:""}},database:{enable:!1,uiDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1},regionDatabase:{host:"",port:"",username:"",password:"",dbname:"",enable:!1}},nodesForChaos:{enable:!1,nodes:[]},nodesForGateway:{enable:!0,nodes:[]}},I=(m=g.default.create(),p=(0,b.connect)(e=>{var a=e.user,t=e.list,s=e.loading,r=e.global,n=e.index;e.region;return{user:a.currentUser,list:t,loading:s.models.list,rainbondInfo:r.rainbondInfo,enterprise:r.enterprise,isRegist:r.isRegist,oauthLongin:s.effects["global/creatOauth"],overviewInfo:n.overviewInfo}}),m(c=p((f=class extends C.PureComponent{constructor(e){super(e),this.loadSteps=(()=>{var e=[{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.basic"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.senior"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.install"})},{title:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.Docking"})}];return e}),this.handleSubmit=(e=>{}),this.toLinkNext=(e=>{var a=this.props.match.params.eid;this.props.form.validateFields((t,s)=>{t||s&&(F.gatewayIngressIPs=s.gatewayIngressIPs||"",F.imageHub.domain=s.domain||"",F.imageHub.namespace=s.namespace||"",F.imageHub.username=s.username||"",F.imageHub.password=s.password||"",F.etcd.endpoints=s.endpoints||[],F.etcd.secretName=s.secretName||"",F.estorage.RWX.config.storageClassName=s.storageClassName1||"",F.estorage.RWO.storageClassName=s.storageClassName2||"",F.database.uiDatabase.host=s.uiDatabase_host||"",F.database.uiDatabase.port=s.uiDatabase_port||"",F.database.uiDatabase.username=s.uiDatabase_username||"",F.database.uiDatabase.password=s.uiDatabase_password||"",F.database.uiDatabase.dbname=s.uiDatabase_dbname||"",F.database.regionDatabase.host=s.regionDatabase_host||"",F.database.regionDatabase.port=s.regionDatabase_port||"",F.database.regionDatabase.username=s.regionDatabase_username||"",F.database.regionDatabase.password=s.regionDatabase_password||"",F.database.regionDatabase.dbname=s.regionDatabase_dbname||"",F.nodesForChaos.nodes=s.nodesForChaos||[],F.nodesForGateway.nodes=s.nodesForGateway||[],"advanced"===e?w.default.push({pathname:"/enterprise/".concat(a,"/provider/ACksterList/advanced"),search:_.default.stringify({data:F,name:"helm",cloudserver:""})}):w.default.push({pathname:"/enterprise/".concat(a,"/provider/ACksterList/install"),search:_.default.stringify({data:F,name:"helm",step:"base",cloudserver:""})}))})}),this.handleValidatorsGateway=((e,a,t)=>{var s=!1;a&&a.length>0?(a.some(e=>{if(!(e.externalIP&&e.internalIP&&e.name))return s=!1,!0;var a=/^[^\s]*$/;e.externalIP.match(a)&&e.internalIP.match(a)&&e.name.match(a)?t():t(new Error("".concat((0,y.formatMessage)({id:"placeholder.no_spaces"})))),s=!0}),s?t():t(new Error("".concat((0,y.formatMessage)({id:"enterpriseColony.ACksterList.node"}))))):t()});var a=this.props.user,t=E.default.isCompanyAdmin(a);this.state={adminer:t,language:"zh-CN"===M.default.get("language")}}componentWillMount(){var e=this.state.adminer,a=this.props.dispatch;e||a(h.routerRedux.push("/"))}componentDidMount(){}render(){var e=this.props,a=e.match.params,t=a.eid,s=(a.provider,a.clusterID,e.form.getFieldDecorator),r={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:5},sm:{span:5}}},m={labelCol:{xs:{span:0},sm:{span:0}},wrapperCol:{xs:{span:6},sm:{span:6}}},p=this.state.language?r:m;return C.default.createElement(v.default,{title:C.default.createElement(y.FormattedMessage,{id:"enterpriseColony.button.text"}),content:C.default.createElement(y.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:x.default.getSvg("clusterSvg",18)},C.default.createElement(i.default,{style:{marginBottom:"16px"}},C.default.createElement(u.default,{current:0},this.loadSteps().map(e=>C.default.createElement(L,{key:e.title,title:e.title})))),C.default.createElement(n.default,{style:{padding:"24px 12px"}},C.default.createElement(g.default,{onSubmit:this.handleSubmit},C.default.createElement("div",{className:N.default.base_configuration},C.default.createElement(i.default,{className:this.state.language?N.default.antd_row:N.default.en_antd_row},C.default.createElement("div",null,C.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},C.default.createElement(y.FormattedMessage,{id:"enterpriseColony.ACksterList.ip"}))),C.default.createElement(k,(0,l.default)({},p,{className:N.default.antd_form,extra:C.default.createElement(y.FormattedMessage,{id:"enterpriseColony.ACksterList.open_ip"})}),s("gatewayIngressIPs",{rules:[{required:!0,message:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.input_ip"})},{pattern:/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}/g,message:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.input_correct_ip"})},{pattern:/^[^\s]*$/,message:(0,y.formatMessage)({id:"placeholder.no_spaces"})}]})(C.default.createElement(d.default,{placeholder:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.ip_demo"})})))),C.default.createElement(i.default,{className:this.state.language?N.default.antd_row:N.default.en_antd_row},C.default.createElement("div",null,C.default.createElement("span",{style:{fontWeight:"bold",fontSize:"16px"}},C.default.createElement(y.FormattedMessage,{id:"enterpriseColony.ACksterList.gateway"}))),C.default.createElement(k,(0,l.default)({},p,{className:N.default.antd_form,extra:C.default.createElement(y.FormattedMessage,{id:"enterpriseColony.ACksterList.availability"})}),s("nodesForGateway",{rules:[{required:!0,message:(0,y.formatMessage)({id:"enterpriseColony.ACksterList.input_install"})},{validator:this.handleValidatorsGateway}]})(C.default.createElement(D.default,null))))),C.default.createElement(i.default,null,C.default.createElement(k,{className:N.default.antd_row_btn},C.default.createElement(o.default,{className:N.default.antd_btn,type:"primary",onClick:()=>{this.props.dispatch(h.routerRedux.push("/enterprise/".concat(t,"/addCluster")))}},C.default.createElement(y.FormattedMessage,{id:"button.return"})),C.default.createElement(o.default,{className:N.default.antd_btn,type:"primary",onClick:()=>{this.toLinkNext("advanced")}},C.default.createElement(y.FormattedMessage,{id:"button.configuration"})),C.default.createElement(o.default,{className:N.default.antd_btn,type:"primary",onClick:()=>{this.toLinkNext("next")}},C.default.createElement(y.FormattedMessage,{id:"button.next"})))))))}},c=f))||c)||c);a.default=I},XZhr:function(e,a,t){e.exports={antd_row:"antd_row___14mZx",antd_form:"antd_form___2_i74",en_antd_row:"en_antd_row___18tTo",antd_row_btn:"antd_row_btn___1fwVs",antd_btn:"antd_btn___3f0tw"}}}]);
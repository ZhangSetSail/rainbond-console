(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[77],{"1TN1":function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=s(a("bx4M"));a("/xke");var r,o,n,d=s(a("TeRw")),m=a("MuoO"),c=i(a("q1tI")),u=a("LLXN"),h=s(a("QDog")),p=s(a("GFvx")),f=s(a("q76B")),g=s(a("puxM")),b=s(a("nqg8")),M=(r=(0,m.connect)(e=>{var t=e.teamControl,a=e.loading;return{regions:t.regions,currentTeam:t.currentTeam,toMoveTeamLoading:a.effects["teamControl/moveTeam"]}}),r((n=class extends c.PureComponent{constructor(e){super(e),this.onMoveTeam=(e=>{this.setState({toMoveTeam:e})}),this.onDelMember=(e=>{this.setState({toDeleteMember:e})}),this.onEditAction=(e=>{this.setState({toEditAction:e})}),this.hideMoveTeam=(()=>{this.setState({toMoveTeam:null})}),this.handleMoveTeam=(()=>{this.props.dispatch({type:"teamControl/moveTeam",payload:{team_name:h.default.getCurrTeamName(),user_id:this.state.toMoveTeam.user_id},callback:e=>{e&&200===e.status_code&&d.default.success({message:e.msg_show}),this.updateCurrentUser(),this.loadMembers(),this.hideMoveTeam()}})}),this.updateCurrentUser=(()=>{this.props.dispatch({type:"user/fetchCurrent"})}),this.hideEditAction=(()=>{this.setState({toEditAction:null})}),this.handleEditAction=(e=>{var t=this.state.toEditAction;this.props.dispatch({type:"teamControl/editMember",payload:{team_name:h.default.getCurrTeamName(),user_id:t.user_id,role_ids:e.role_ids},callback:()=>{this.loadMembers(),this.hideEditAction()}})}),this.showAddMember=(()=>{this.setState({showAddMember:!0})}),this.hideAddMember=(()=>{this.setState({showAddMember:!1})}),this.handleAddMember=(e=>{this.props.dispatch({type:"teamControl/addMember",payload:{team_name:h.default.getCurrTeamName(),user_ids:e.user_ids.map(e=>e.key).join(","),role_ids:e.role_ids.join(",")},callback:()=>{this.loadMembers(),this.hideAddMember()}})}),this.hideDelMember=(()=>{this.setState({toDeleteMember:null})}),this.handleDelMember=(()=>{this.props.dispatch({type:"teamControl/delMember",payload:{team_name:h.default.getCurrTeamName(),user_ids:this.state.toDeleteMember.user_id},callback:()=>{this.loadMembers(),this.hideDelMember()}})}),this.loadMembers=(()=>{var e=this.props.dispatch,t=h.default.getCurrTeamName(),a=h.default.getCurrRegionName();e({type:"teamControl/fetchTeamMember",payload:{team_name:t,region_name:a,page_size:this.state.pageSize,page:this.state.page},callback:e=>{e&&this.setState({members:e.list||[],total:e.total})}})}),this.hanldePageChange=(e=>{this.setState({page:e},()=>{this.loadMembers()})}),this.state={showAddMember:!1,toDeleteMember:null,toMoveTeam:null,page:1,pageSize:8,total:0,members:[]}}componentDidMount(){this.loadMembers()}render(){var e=this.props,t=e.currentTeam,a=e.memberPermissions,s=e.toMoveTeamLoading,i=e.memberPermissions.isCreate,r=this.state,o=r.page,n=r.pageSize,d=r.total,m=r.showAddMember,h=r.members,M=r.roles,v=r.toEditAction,_=r.toDeleteMember,E=r.toMoveTeam,C={current:o,pageSize:n,total:d,onChange:e=>{this.hanldePageChange(e)}};return c.default.createElement("div",null,c.default.createElement(l.default,{style:{marginBottom:24},bodyStyle:{paddingTop:12},title:(0,u.formatMessage)({id:"teamManage.tabs.member.title"}),extra:i&&c.default.createElement("a",{href:"javascript:;",onClick:this.showAddMember},(0,u.formatMessage)({id:"teamManage.tabs.member.btn.add"}))},c.default.createElement(g.default,{sm:600},c.default.createElement(b.default,{memberPermissions:a,pagination:d>8&&C,team:t,onMoveTeam:this.onMoveTeam,onDelete:this.onDelMember,onEditAction:this.onEditAction,list:h}))),m&&c.default.createElement(p.default,{roles:M,onOk:this.handleAddMember,onCancel:this.hideAddMember}),v&&c.default.createElement(p.default,{roles:M,data:v,onOk:this.handleEditAction,onCancel:this.hideEditAction}),_&&c.default.createElement(f.default,{onOk:this.handleDelMember,title:(0,u.formatMessage)({id:"confirmModal.delete.member"}),subDesc:(0,u.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,u.formatMessage)({id:"confirmModal.delete.member.desc"}),onCancel:this.hideDelMember}),E&&c.default.createElement(f.default,{onOk:this.handleMoveTeam,loading:s,title:(0,u.formatMessage)({id:"confirmModal.MoveTeam.title"}),subDesc:(0,u.formatMessage)({id:"confirmModal.MoveTeam.subDesc"}),desc:(0,u.formatMessage)({id:"confirmModal.MoveTeam.desc"},{nick_name:E.nick_name}),onCancel:this.hideMoveTeam}))}},o=n))||o);t.default=M},"2inB":function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l,r,o,n=s(a("bx4M")),d=a("MuoO"),m=s(a("wd/R")),c=i(a("q1tI")),u=a("LLXN"),h=s(a("q76B")),p=s(a("QDog")),f=s(a("Jjnt")),g=s(a("XZTq")),b=(l=(0,d.connect)(e=>{var t=e.teamControl,a=e.loading;return{regions:t.regions,projectLoading:a.effects["project/fetchNotice"],activitiesLoading:a.effects["activities/fetchList"]}}),l((o=class extends c.PureComponent{constructor(e){super(e),this.onOpenRegion=(()=>{this.setState({openRegion:!0})}),this.cancelOpenRegion=(()=>{this.setState({openRegion:!1})}),this.handleOpenRegion=(e=>{this.props.dispatch({type:"teamControl/openRegion",payload:{team_name:p.default.getCurrTeamName(),region_names:e.join(",")},callback:()=>{this.fetchRegions(),this.props.dispatch({type:"user/fetchCurrent"}),this.cancelOpenRegion()}})}),this.handleCloseRegion=(()=>{var e=this.state.regionName;this.props.dispatch({type:"teamControl/closeTeamRegion",payload:{teamName:p.default.getCurrTeamName(),regionName:e},callback:()=>{this.fetchRegions(),this.props.dispatch({type:"user/fetchCurrent"}),this.cancelCloseRegion()}})}),this.fetchRegions=(()=>{var e=this.props.dispatch,t=p.default.getCurrTeamName();e({type:"teamControl/fetchRegions",payload:{team_name:t}})}),this.showCloseRegion=(e=>{this.setState({showUninstallCluster:!0,regionName:e})}),this.cancelCloseRegion=(()=>{this.setState({showUninstallCluster:!1})}),this.state={openRegion:!1,showUninstallCluster:!1,closeRegionLoading:!1}}componentDidMount(){this.fetchRegions()}render(){var e=this.props,t=e.regions,a=e.projectLoading,s=e.datecenterPermissions,i=s.isInstall,l=s.isUninstall,r=this.state,o=r.openRegion,d=r.showUninstallCluster,p=r.closeRegionLoading;return c.default.createElement("div",null,c.default.createElement(n.default,{className:g.default.projectList,style:{marginBottom:24},title:(0,u.formatMessage)({id:"teamManage.tabs.cluster.openCluster"}),extra:i&&c.default.createElement("a",{onClick:this.onOpenRegion},(0,u.formatMessage)({id:"teamManage.tabs.cluster.open"})),loading:a,bodyStyle:{padding:0}},(t||[]).map(e=>c.default.createElement(n.default.Grid,{className:g.default.projectGrid,key:e.ID},c.default.createElement(n.default,{bodyStyle:{padding:0},bordered:!1},c.default.createElement(n.default.Meta,{title:c.default.createElement("div",{className:g.default.cardTitle},c.default.createElement("svg",{t:"1597473134624",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1784",width:"24",height:"24"},c.default.createElement("path",{d:"M513 564.538c-3.453 0-6.906-0.894-10-2.68L322.545 457.672a19.999 19.999 0 0 1-10-17.32V231.98a19.998 19.998 0 0 1 10-17.32L503 110.475a19.998 19.998 0 0 1 20 0L703.455 214.66a19.999 19.999 0 0 1 10 17.32v208.371a19.998 19.998 0 0 1-10 17.32L523 561.858a19.98 19.98 0 0 1-10 2.68zM352.545 428.805L513 521.444l160.455-92.64V243.527L513 150.889l-160.455 92.638v185.278z","p-id":"1785"}),c.default.createElement("path",{d:"M511.849 327.408a9.995 9.995 0 0 1-4.925-1.297l-110.393-62.465a9.998 9.998 0 0 1-0.098-17.35l111.561-64.802a10.002 10.002 0 0 1 10.017-0.017l110.395 63.634a10 10 0 0 1-0.04 17.351l-111.563 63.633a9.997 9.997 0 0 1-4.954 1.313z m-90.288-72.578l90.268 51.078 91.479-52.178-90.271-52.035-91.476 53.135z m-122.37 672.469c-3.453 0-6.906-0.894-10-2.68L108.736 820.433a19.999 19.999 0 0 1-10-17.32V594.741a19.998 19.998 0 0 1 10-17.32l180.455-104.186a19.998 19.998 0 0 1 20 0l180.456 104.186a19.999 19.999 0 0 1 10 17.32v208.371a19.998 19.998 0 0 1-10 17.32L309.191 924.619a19.991 19.991 0 0 1-10 2.68zM138.736 791.565l160.455 92.64 160.456-92.64V606.288l-160.456-92.639-160.455 92.639v185.277z","p-id":"1786"}),c.default.createElement("path",{d:"M298.039 690.169a9.995 9.995 0 0 1-4.925-1.297l-110.393-62.465a9.998 9.998 0 0 1-0.098-17.35l111.562-64.803a10.002 10.002 0 0 1 10.017-0.017l110.394 63.635a10.003 10.003 0 0 1-0.039 17.351l-111.563 63.633a10.014 10.014 0 0 1-4.955 1.313z m-90.288-72.578l90.268 51.077 91.479-52.178-90.271-52.035-91.476 53.136z m518.267 72.578a9.995 9.995 0 0 1-4.925-1.297L610.7 626.407a10 10 0 0 1-0.098-17.35l111.563-64.803a10.002 10.002 0 0 1 10.017-0.017l110.394 63.635a10.003 10.003 0 0 1-0.039 17.351l-111.563 63.633a10.02 10.02 0 0 1-4.956 1.313z m-90.288-72.578l90.268 51.077 91.479-52.178-90.271-52.035-91.476 53.136z","p-id":"1787"}),c.default.createElement("path",{d:"M725.408 927.299c-3.453 0-6.906-0.894-10-2.68L534.953 820.433a19.999 19.999 0 0 1-10-17.32V594.741a19.998 19.998 0 0 1 10-17.32l180.455-104.186a19.998 19.998 0 0 1 20 0l180.455 104.186a19.999 19.999 0 0 1 10 17.32v208.371a19.998 19.998 0 0 1-10 17.32L735.408 924.619a19.991 19.991 0 0 1-10 2.68zM564.953 791.565l160.455 92.64 160.455-92.64V606.288l-160.455-92.639-160.455 92.639v185.277z","p-id":"1788"})),c.default.createElement("a",null,e.region_alisa),l&&c.default.createElement("a",{onClick:()=>this.showCloseRegion(e.region_name),style:{float:"right",color:"#1890ff"}},(0,u.formatMessage)({id:"teamManage.tabs.cluster.unload"}))),description:e.desc||"-"}),c.default.createElement("div",{className:g.default.projectItemContent},c.default.createElement("span",{className:g.default.datetime},(0,u.formatMessage)({id:"teamManage.tabs.cluster.opened"})," ",(0,m.default)(e.create_time).locale("zh-cn").format("YYYY\u5e74-MM\u6708-DD\u65e5")))))),t&&t.length?"":c.default.createElement("p",{style:{textAlign:"center",paddingTop:20}},(0,u.formatMessage)({id:"teamManage.tabs.cluster.null"}))),o&&c.default.createElement(f.default,{onSubmit:this.handleOpenRegion,onCancel:this.cancelOpenRegion}),d&&c.default.createElement(h.default,{onOk:this.handleCloseRegion,loading:p,title:(0,u.formatMessage)({id:"teamManage.tabs.cluster.unloadCluster"}),desc:(0,u.formatMessage)({id:"teamManage.tabs.cluster.unloadCluster.desc"}),onCancel:this.cancelCloseRegion}))}},r=o))||r);t.default=b},"4OG1":function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV"));a("DZo9");var r=s(a("8z0m")),o=s(a("jehZ"));a("5NDa");var n=s(a("5rEg"));a("Pwec");var d=s(a("CtXQ"));a("y8nQ");var m,c,u,h=s(a("Vl3Y")),p=i(a("q1tI")),f=s(a("nyIC")),g=s(a("8+Sn")),b=s(a("mzlC")),M=a("LLXN"),v=h.default.Item,_=(m=h.default.create(),m((u=class extends p.PureComponent{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault();var t=this.props.form,a=this.state.imageUrl;t.validateFields((e,t)=>{t.new_logo=a,e||this.props.onSubmit(t)})}),this.onCancel=(()=>{this.props.onCancel()}),this.handleLogoRemove=(()=>{this.setState({imageUrl:"",imageBase64:""})}),this.handleLogoChange=(e=>{"uploading"!==e.file.status?"done"===e.file.status&&(this.setState({imageUrl:e.file&&e.file.response&&e.file.response.data&&e.file.response.data.bean&&e.file.response.data.bean.file_url,loading:!1}),this.getLogoBase64(e.file.originFileObj,e=>this.setState({imageBase64:e}))):this.setState({loading:!0})}),this.getLogoBase64=((e,t)=>{var a=new FileReader;a.addEventListener("load",()=>t(a.result)),a.readAsDataURL(e)}),this.state={imageUrl:"",imageBase64:""}}render(){var e=this.props.form.getFieldDecorator,t=this.props.teamAlias,a=this.state,s=a.imageBase64,i=a.imageUrl,m=this.props.imageUrlTeam,c=void 0!==m&&m,u=g.default.get("token"),_={};u&&(_.Authorization="GRJWT ".concat(u));var E={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},C=p.default.createElement("div",null,p.default.createElement(d.default,{type:"plus"}),p.default.createElement("div",{className:"ant-upload-text"},(0,M.formatMessage)({id:"popover.newApp.upload_pictures"})));return p.default.createElement(l.default,{title:(0,M.formatMessage)({id:"teamOther.move_team.logo_label"}),visible:!0,onOk:this.handleSubmit,onCancel:this.onCancel},p.default.createElement(h.default,{onSubmit:this.handleSubmit},p.default.createElement(v,(0,o.default)({},E,{label:(0,M.formatMessage)({id:"teamOther.move_team.name_label"})}),e("new_team_alias",{initialValue:t||"",rules:[{required:!0,message:(0,M.formatMessage)({id:"teamOther.move_team.null"})},{max:32,message:(0,M.formatMessage)({id:"teamOther.move_team.max"})}]})(p.default.createElement(n.default,{placeholder:(0,M.formatMessage)({id:"teamOther.move_team.input_name"})}))),p.default.createElement(v,(0,o.default)({},E,{label:"LOGO",extra:p.default.createElement("div",{className:b.default.conformDesc},p.default.createElement(M.FormattedMessage,{id:"popover.enterpriseOverview.setUpTeam.label.logo"}))}),e("logo",{rules:[{required:!1,message:(0,M.formatMessage)({id:"popover.enterpriseOverview.setUpTeam.input_logo"})}]})(p.default.createElement(r.default,{className:"logo-uploader",name:"file",accept:"image/jpg,image/jpeg,image/png",action:f.default.imageUploadUrl,listType:"picture-card",headers:_,showUploadList:!1,onChange:this.handleLogoChange,onRemove:this.handleLogoRemove},i||c?p.default.createElement("img",{src:s||c,alt:"LOGO",style:{width:"100%"}}):C)))))}},c=u))||c);t.default=_},"69fC":function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV")),r=s(a("jehZ"));a("14J3");var o=s(a("BMrR"));a("g9YV");var n=s(a("wCAj"));a("P2fV");var d=s(a("NJEC"));a("jCWc");var m=s(a("kPKH"));a("IzEo");var c=s(a("bx4M"));a("Mwp2");var u=s(a("VXEj"));a("y8nQ");var h=s(a("Vl3Y"));a("OaEy");var p,f,g,b,M=s(a("2fM7")),v=a("MuoO"),_=a("7DNP"),E=i(a("q1tI")),C=a("LLXN"),y=s(a("QDog")),R=s(a("hMqj")),T=s(a("ck6v")),A=M.default.Option,N=h.default.Item,S=(p=h.default.create(),f=(0,v.connect)(e=>{var t=e.teamControl,a=e.loading,s=e.user;return{regions:t.regions,currUser:s.currentUser,activitiesLoading:a.effects["activities/fetchList"]}}),p(g=f((b=class extends E.PureComponent{constructor(e){super(e),this.loadEvents=(()=>{var e=y.default.getCurrTeamName();this.props.dispatch({type:"index/fetchEvents",payload:{team_name:e,page_size:this.state.pageSize,page:this.state.page},callback:e=>{e&&this.setState({events:e.list||[],total:e.total||e.list.length})}})}),this.loadRoles=(()=>{var e=this.props.dispatch;e({type:"teamControl/fetchTeamRoles",payload:{team_name:y.default.getCurrTeamName(),page_size:1e4,page:1},callback:e=>{e&&this.setState({roles:e.list||[]})}})}),this.loadJoinUsers=(()=>{var e=y.default.getCurrTeamName();this.props.dispatch({type:"teamControl/getJoinTeamUsers",payload:{team_name:e},callback:e=>{e&&this.setState({joinUsers:e.list||[]})}})}),this.hanldePageChange=(e=>{this.setState({page:e},()=>{this.loadEvents()})}),this.handleRefused=(e=>{this.props.dispatch({type:"teamControl/setJoinTeamUsers",payload:{team_name:y.default.getCurrTeamName(),user_id:e.user_id,action:!1},callback:()=>{this.loadJoinUsers()}})}),this.handleJoinShow=(e=>{this.setState({joinSettingShow:!0,joinUser:e})}),this.hideJoinShow=(()=>{this.setState({joinSettingShow:!1,joinUser:null})}),this.handleJoin=(()=>{var e=this.state.joinUser,t=this.props.form;t.validateFields((t,a)=>{t||this.props.dispatch({type:"teamControl/setJoinTeamUsers",payload:{team_name:y.default.getCurrTeamName(),user_id:e.user_id,role_ids:a.role_ids,action:!0},callback:()=>{this.hideJoinShow(),this.loadJoinUsers()}})})}),this.state={page:1,pageSize:8,total:0,events:[],roles:[],joinUsers:[],joinSettingShow:!1,joinUser:null}}componentDidMount(){this.loadEvents(),this.loadJoinUsers(),this.loadRoles()}renderActivities(){var e=this.state.events||[];return e.length?e.map(e=>{var t=e.UserName,a=e.OptType,s=e.FinalStatus,i=e.Status,l=e.create_time,r=e.Target,o="/team/".concat(y.default.getCurrTeamName(),"/region/").concat(y.default.getCurrRegionName(),"/components/").concat(e.service_alias,"/overview");return E.default.createElement(u.default.Item,{key:e.ID},E.default.createElement(u.default.Item.Meta,{title:E.default.createElement("span",null,E.default.createElement("a",{className:T.default.username},t),E.default.createElement("span",{className:T.default.event}," ",y.default.fetchStateOptTypeText(a)),"\xa0",r&&"service"===r&&E.default.createElement(_.Link,{to:o,className:T.default.event},e.service_name),E.default.createElement("span",null,(0,C.formatMessage)({id:"teamManage.tabs.dynamic.meta.app"})),E.default.createElement("span",{style:{color:y.default.fetchAbnormalcolor(a)}},y.default.fetchOperation(s,i))),description:E.default.createElement("span",{className:T.default.datatime_float,title:e.updatedAt},y.default.fetchdayTime(l))}))}):E.default.createElement("p",{style:{textAlign:"center",color:"ccc",paddingTop:20}},(0,C.formatMessage)({id:"teamManage.tabs.dynamic.notDynamic"}))}render(){var e=this.props,t=e.activitiesLoading,a=e.memberPermissions.isCreate,s=e.form,i=this.state,p=i.joinSettingShow,f=i.roles,g=i.total,b=s.getFieldDecorator,v={current:this.state.page,pageSize:this.state.pageSize,total:this.state.total,onChange:e=>{this.hanldePageChange(e)}},_={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return E.default.createElement("div",null,E.default.createElement(o.default,{gutter:24},E.default.createElement(m.default,{md:12,sm:24},E.default.createElement(c.default,{bodyStyle:{paddingTop:12},title:(0,C.formatMessage)({id:"teamManage.tabs.dynamic"}),loading:t},E.default.createElement(u.default,{pagination:g>8&&v,loading:t,size:"large"},E.default.createElement("div",{className:T.default.activitiesList},this.renderActivities())))),E.default.createElement(m.default,{md:12,sm:24},E.default.createElement(c.default,{bodyStyle:{paddingTop:12},title:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.title.addTeam"})},E.default.createElement(n.default,{pagination:!1,dataSource:this.state.joinUsers||[],columns:[{title:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.table.user"}),dataIndex:"user_name"},{title:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.table.time"}),dataIndex:"apply_time"},{title:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.table.operate"}),dataIndex:"",render:(e,t)=>0===t.is_pass&&a&&E.default.createElement(E.Fragment,null,E.default.createElement("a",{onClick:()=>this.handleJoinShow(t)},(0,C.formatMessage)({id:"teamManage.tabs.dynamic.table.btn.through"})),E.default.createElement(d.default,{title:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.table.btn.popconfirm"}),onConfirm:()=>{this.handleRefused(t)}},E.default.createElement("a",{style:{marginLeft:6}},(0,C.formatMessage)({id:"teamManage.tabs.dynamic.table.btn.refuse"}))))}]})))),p&&E.default.createElement(l.default,{title:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.modal.title"}),visible:!0,onOk:this.handleJoin,onCancel:this.hideJoinShow},E.default.createElement(h.default,null,E.default.createElement(N,(0,r.default)({},_,{label:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.form.lable"})}),b("role_ids",{rules:[{required:!0,message:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.form.placeholder"})}]})(E.default.createElement(M.default,{getPopupContainer:e=>e.parentNode,mode:"multiple",placeholder:(0,C.formatMessage)({id:"teamManage.tabs.dynamic.form.placeholder"}),style:{width:"100%"}},f.map(e=>{var t=e.ID,a=e.name;return E.default.createElement(A,{key:t,value:t},R.default.actionMap(a))})))))))}},g=b))||g)||g);t.default=S},CEQl:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var l=s(a("W9HT")),r=s(a("jehZ"));a("5NDa");var o=s(a("5rEg"));a("+L6B");var n=s(a("2/Rp"));a("/xke");var d=s(a("TeRw"));a("y8nQ");var m=s(a("Vl3Y"));a("ozfa");var c,u,h,p,f=s(a("MJZm")),g=a("MuoO"),b=i(a("q1tI")),M=a("LLXN"),v=s(a("QDog")),_=s(a("hMqj")),E=s(a("8+Sn")),C=s(a("CXnr")),y=f.default.TreeNode,R=m.default.Item,T=(c=m.default.create(),u=(0,g.connect)(e=>{var t=e.teamControl,a=e.loading,s=e.user;return{teamControl:t,currUser:s.currentUser,activitiesLoading:a.effects["activities/fetchList"]}}),c(h=u((p=class extends b.PureComponent{constructor(e){var t;super(e),t=this,this.onExpand=(e=>{this.setState({expandedKeys:e,autoExpandParent:!1})}),this.onCheck=(e=>{this.setState({checkedKeys:e})}),this.onSelect=(e=>{this.setState({selectedKeys:e})}),this.handleResetRoleForm=(()=>{var e=this.props.form;this.setState({rolePermissionItem:null,expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[]}),e.resetFields()}),this.handleAddRole=(e=>{var t=this.props.dispatch;t({type:"teamControl/createRole",payload:{team_name:v.default.getCurrTeamName(),name:e.name},callback:e=>{if(e&&200===e.status_code)return this.loadTeamRolesPermissions(e.bean.ID,!0);this.handleCloseLoading()}})}),this.loadTeamRolesPermissions=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=t.props.dispatch;s({type:"teamControl/fetchTeamRolesPermissions",payload:{team_name:v.default.getCurrTeamName(),role_id:e},callback:e=>{if(e&&200===e.status_code){var s=e.bean&&e.bean.permissions||null;s&&t.handlePermissions(e.bean,a)}}})},this.handlePermissions=((e,t)=>{var a=this.props.permissions,s=this.state.checkedKeys,i=[],l=e;a&&(a.team.perms.map((e,t)=>{var a=e.code,r=e.name,o=l.permissions.team.perms;o[t][r]&&i.push("".concat(a)),s&&(s.includes("".concat(a))?o[t][r]=!0:o[t][r]=!1)}),this.handlePermissionsSubmodels(a.team.sub_models,l.permissions.team.sub_models,i)),s&&(t?this.setState({rolePermissionItem:l},()=>{this.handleRolePermissions(l)}):this.setState({expandedKeys:i,checkedKeys:i,autoExpandParent:!0}))}),this.handlePermissionsSubmodels=((e,t,a)=>{var s=this.state.checkedKeys;e.map(e=>{t.map(t=>{var i=Object.keys(e)[0],l=Object.keys(t)[0];if(i===l){if(e[i].sub_models&&e[i].sub_models.length>0)return this.handlePermissionsSubmodels(e[i].sub_models,t[l].sub_models,a);e[i].perms.map(e=>{t[l].perms.map(t=>{var i=e.code,l=e.name,r=Object.keys(t)[0];r===l&&(t[l]&&a.push("".concat(i)),s&&(s.includes("".concat(i))?t[l]=!0:t[l]=!1))})})}})})}),this.handleRoleName=((e,t)=>{var a=this.state.language;if(t&&t.length>0){var s=t.filter(t=>{return"".concat(t.ID)==="".concat(e)});if(s&&s.length>0){var i=this.props.form.setFieldsValue;i({name:_.default.actionMap(s[0].name,a)})}}}),this.handleEditRole=(e=>{var t=this.props,a=t.dispatch,s=t.rolesID;a({type:"teamControl/editRole",payload:{team_name:v.default.getCurrTeamName(),role_id:s,name:e.name},callback:e=>{if(e&&200===e.status_code)return this.loadTeamRolesPermissions(e.bean.ID,!0);this.handleCloseLoading()}})}),this.handleRolePermissions=(e=>{if(e){var t=this.props,a=t.dispatch,s=t.onCancelAddRole,i=t.isAddRole;a({type:"teamControl/updateRolePermissions",payload:{team_name:v.default.getCurrTeamName(),role_id:e.role_id,permissions:e.permissions},callback:e=>{e&&200===e.status_code&&(s(parseInt(e.bean.role_id)),d.default.success({message:i?(0,M.formatMessage)({id:"notification.success.setUp"}):(0,M.formatMessage)({id:"notification.success.edit"})})),this.handleCloseLoading()}})}}),this.handleCloseLoading=(()=>{this.setState({loading:!1})}),this.handleSubmit=(()=>{this.props.form.validateFields((e,t)=>{if(!e){var a=this.props.isAddRole;this.setState({loading:!0},()=>{a?this.handleAddRole(t):this.handleEditRole(t)})}})}),this.renderTreePermsNodes=(e=>{return e.map(e=>{var t=e.code,a=e.desc;return b.default.createElement(y,{key:t,title:a})})}),this.renderTreeNodes=((e,t)=>e.map(e=>{var a=Object.keys(e)[0];return e[a].sub_models&&e[a].sub_models.length>0?this.renderTreeNodes(e[a].sub_models):b.default.createElement(y,{key:a,title:_.default.fetchAccessText(a,t)},e[a].perms.map(e=>{return b.default.createElement(y,{key:e.code,title:t?e.desc:e.name})}))})),this.handleSubmitButton=((e,t)=>{return b.default.createElement(n.default,{loading:e,type:"primary",onClick:this.handleSubmit},t?(0,M.formatMessage)({id:"teamManage.tabs.role.list.permissions.add"}):(0,M.formatMessage)({id:"teamManage.tabs.role.list.permissions.edit"}))}),this.state={rolePermissionItem:null,expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],loading:!1,language:"zh-CN"===E.default.get("language")}}componentDidMount(){var e=this.props,t=e.rolesID,a=e.roleList;t&&(this.loadTeamRolesPermissions(t),this.handleRoleName(t,a))}componentWillReceiveProps(e){(this.props.rolesID!==e.rolesID&&e.rolesID||this.props.isAddRole!==e.isAddRole&&!e.isAddRole)&&(this.loadTeamRolesPermissions(e.rolesID),this.handleRoleName(e.rolesID,e.roleList)),(this.props.isAddRole!==e.isAddRole&&e.isAddRole||!e.rolesID&&!e.isAddRole)&&this.handleResetRoleForm(e.isAddRole)}render(){var e=this.props,t=e.form,a=e.permissions,s=e.permissionsLoading,i=e.isAddRole,d=e.onCancelAddRole,c=e.isEdit,u=e.isCreate,h=this.state,p=h.expandedKeys,g=h.autoExpandParent,v=h.checkedKeys,_=h.selectedKeys,E=h.loading,T=h.language,A=t.getFieldDecorator,N={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return b.default.createElement(m.default,{onSubmit:this.handleSubmit},b.default.createElement(l.default,{spinning:s},b.default.createElement("div",{className:C.default.AuthModuleWrap},b.default.createElement(R,(0,r.default)({},N,{label:(0,M.formatMessage)({id:"teamManage.tabs.role.list.permissions.roleName"})}),A("name",{rules:[{required:!0,message:(0,M.formatMessage)({id:"placeholder.roleName"})},{max:32,message:(0,M.formatMessage)({id:"placeholder.max32"})}]})(b.default.createElement(o.default,{placeholder:(0,M.formatMessage)({id:"placeholder.roleName"})}))),a&&b.default.createElement(R,(0,r.default)({},N,{label:(0,M.formatMessage)({id:"teamManage.tabs.role.list.permissions.allot"})}),A("permissions",{rules:[{required:!1,message:(0,M.formatMessage)({id:"placeholder.permissions"})}]})(b.default.createElement(f.default,{className:C.default.tree,checkable:!0,onExpand:this.onExpand,expandedKeys:p,autoExpandParent:g,onCheck:this.onCheck,checkedKeys:v,onSelect:this.onSelect,selectedKeys:_},a.team.perms.map(e=>{var t=e.code,a=e.desc,s=e.name;return b.default.createElement(y,{key:t,title:T?a:s})}),this.renderTreeNodes(a.team.sub_models,T)))))),b.default.createElement("div",{className:C.default.systemFormBtn},i&&b.default.createElement(n.default,{onClick:d,style:{marginRight:"20px"}},(0,M.formatMessage)({id:"teamManage.tabs.role.list.permissions.btn.cancel"})),!i&&c&&this.handleSubmitButton(E,i),u&&i&&this.handleSubmitButton(E,i)))}},h=p))||h)||h);t.default=T},CXnr:function(e,t,a){e.exports={nameID:"nameID___p9uAZ",icon:"icon___3R8Sp",iconm:"iconm___24A6n",systemRoleWrapper:"systemRoleWrapper___2_MW5",systemRole:"systemRole___1v3ii",systemRoleTitle:"systemRoleTitle___2axA0",authSettingBody:"authSettingBody___F6WcO",roleName:"roleName___2oW2k",projectList:"projectList___2hnQq",cardTitle:"cardTitle___EaLdl",projectGrid:"projectGrid___3QVYj",projectItemContent:"projectItemContent___2cp8H",datetime:"datetime___2qUj5",noRole:"noRole___3VLyn",systemRoleList:"systemRoleList___2QGX-",AuthModuleWrap:"AuthModuleWrap___2FBuO",systemFormBtn:"systemFormBtn___f_HBr",systemRoleBtn:"systemRoleBtn___15D15",tree:"tree___1dghD"}},FEcc:function(e,t,a){"use strict";var s=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=i(a("wCAj")),r=s(a("q1tI")),o=a("LLXN");i(a("zcww")),i(a("hMqj")),i(a("QDog")),a("xpXo");class n extends r.PureComponent{constructor(e){super(e),this.state={}}render(){var e=this.props,t=e.list,a=(e.members,e.pagination),s=e.onDelete,i=e.onEditAction,n=(e.onMoveTeam,e.memberPermissions),d=n.isEdit,m=n.isDelete,c=n.isAccess,u=(e.team,[{title:(0,o.formatMessage)({id:"teamManage.tabs.image.table.imageAddress"}),dataIndex:"domain",key:"domain",align:"center"},{title:(0,o.formatMessage)({id:"teamManage.tabs.image.table.user"}),dataIndex:"username",key:"username",align:"center"},{title:(0,o.formatMessage)({id:"teamManage.tabs.image.table.password"}),dataIndex:"password",key:"password",align:"center",render(e,t){for(var a=e.length,s="",i=0;i<=a-1;i++)s+="*";return r.default.createElement("span",null,s)}},{title:c&&(d||m)?(0,o.formatMessage)({id:"teamManage.tabs.image.table.operate"}):"",dataIndex:"action",key:"action",align:"center",render(e,t){return r.default.createElement("div",null,d&&r.default.createElement("a",{style:{marginLeft:6},onClick:()=>{i(t)},href:"javascript:;"},(0,o.formatMessage)({id:"teamManage.tabs.image.table.btn.edit"})),m&&r.default.createElement("a",{href:"javascript:;",onClick:()=>{s(t)}},(0,o.formatMessage)({id:"teamManage.tabs.image.table.btn.delete"})))}}]);return r.default.createElement(l.default,{pagination:t.length>8&&a,dataSource:t,columns:u})}}var d=n;t.default=d},Hb6Z:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV"));a("cWXX");var r=s(a("/ezw")),o=s(a("jehZ"));a("5NDa");var n=s(a("5rEg"));a("y8nQ");var d=s(a("Vl3Y"));a("OaEy");var m,c,u,h,p=s(a("2fM7")),f=a("MuoO"),g=i(a("q1tI")),b=a("LLXN"),M=s(a("QDog")),v=s(a("8+Sn")),_=(s(a("hMqj")),s(a("DG7E")),p.default.Option,d.default.Item),E=(m=d.default.create(),c=(0,f.connect)(),m(u=c((h=class extends g.PureComponent{constructor(e){super(e),this.fetchTeamUserRoles=(()=>{var e=this.props,t=e.dispatch,a=e.userId,s=e.eid,i=e.teamName;t({type:"teamControl/fetchUserTeamsRoles",payload:{tenantName:i,team_name:i,enterprise_id:s,user_id:a,page:1,page_size:-1},callback:e=>{this.setState({currentRoles:e.bean&&e.bean.roles||[]},()=>{this.handleCloseCurrentRolesLoading()})}})}),this.loadRoles=(()=>{var e=this.props,t=e.dispatch,a=e.teamName;t({type:"teamControl/fetchTeamRoles",payload:{team_name:a||M.default.getCurrTeamName(),page_size:-1,page:1},callback:e=>{this.setState({roles:e.list||[]},()=>{this.handleCloseRoleLoading()})}})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.handleCloseRoleLoading=(()=>{this.setState({roleLoading:!1})}),this.handleCloseCurrentRolesLoading=(()=>{this.setState({currentRolesLoading:!1})}),this.validateNoChinese=((e,t,a)=>{var s=/^[^\u4e00-\u9fa5]+$/g,i=/^\s*$/g;t&&!s.test(t)?a((0,b.formatMessage)({id:"placeholder.reg_Chinese"})):t&&i.test(t)?a((0,b.formatMessage)({id:"placeholder.regEmpty"})):a()}),this.state={roles:[],currentRoles:[],roleLoading:!0,currentRolesLoading:!0,language:"zh-CN"===v.default.get("language")}}componentDidMount(){this.loadRoles();var e=this.props,t=e.viewName,a=e.data;"enterprise"===t&&a&&a.roles&&a.roles.length>0?this.fetchTeamUserRoles():this.handleCloseCurrentRolesLoading()}render(){var e=this.props,t=e.onCancel,a=e.data,s=e.form,i=e.title,m=e.loading,c=s.getFieldDecorator,u=(s.getValueFormEvent,this.state),h=(u.roles,u.currentRoles),p=u.roleLoading,f=u.currentRolesLoading,M=u.language,v=[],E=h&&h.length>0&&h||a&&a.roles&&a.roles.length>0&&a.roles||[];E.map(e=>{e.role_id&&v.push(Number(e.role_id))});var C={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},y={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:14}}},R=M?C:y;return g.default.createElement(l.default,{confirmLoading:m,title:i||(a?(0,b.formatMessage)({id:"confirmModal.edit.image.title"}):(0,b.formatMessage)({id:"confirmModal.add.image.title"})),visible:!0,onOk:this.handleSubmit,onCancel:t},g.default.createElement(r.default,{loading:p||f},g.default.createElement(d.default,{onSubmit:this.handleSubmit},g.default.createElement(_,(0,o.default)({},R,{label:(0,b.formatMessage)({id:"confirmModal.image.lable.domain"})}),c("domain",{initialValue:"",rules:[{required:!0,message:(0,b.formatMessage)({id:"placeholder.git_url_domain"})},{message:(0,b.formatMessage)({id:"placeholder.not_Chinese"}),validator:this.validateNoChinese},{max:255,message:(0,b.formatMessage)({id:"placeholder.max255"})}],getValueFromEvent:e=>{return e.target.value.replace(/(^\s*)|(\s*$)/g,"")}})(g.default.createElement(n.default,{placeholder:(0,b.formatMessage)({id:"placeholder.git_url_domain"})}))),g.default.createElement(_,(0,o.default)({},R,{label:(0,b.formatMessage)({id:"confirmModal.image.lable.username"})}),c("username",{initialValue:"",rules:[{required:!0,message:(0,b.formatMessage)({id:"placeholder.userName"})},{max:255,message:(0,b.formatMessage)({id:"placeholder.max255"})}]})(g.default.createElement(n.default,{placeholder:(0,b.formatMessage)({id:"placeholder.userName"})}))),g.default.createElement(_,(0,o.default)({},R,{label:(0,b.formatMessage)({id:"confirmModal.image.lable.password"})}),c("password",{initialValue:"",rules:[{required:!0,message:(0,b.formatMessage)({id:"placeholder.password_1"})},{max:255,message:(0,b.formatMessage)({id:"placeholder.max255"})}]})(g.default.createElement(n.default,{placeholder:(0,b.formatMessage)({id:"placeholder.password_1"}),type:"password"}))))))}},u=h))||u)||u),C=E;t.default=C},IzeZ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAABGCAYAAACe7Im6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMjYwMjM1My00YTg5LTQzYTgtODg4Mi1kNWI0M2Q4MzJhZGQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDZFMTdENjAxRUVGMTFFODgxRDFFMjkwOTQxREFDNTEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDZFMTdENUYxRUVGMTFFODgxRDFFMjkwOTQxREFDNTEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MWJlMThkMGMtYzM4NS00MjFjLWEwZmEtN2UwMzNmNTI4Y2ZmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZjY4ZTBkYjktNzZhMy0wNjQzLTk3NmItYjVl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"},LiPW:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var l=s(a("bx4M"));a("/xke");var r,o,n,d=s(a("TeRw")),m=a("MuoO"),c=i(a("q1tI")),u=a("LLXN"),h=s(a("QDog")),p=s(a("Hb6Z")),f=s(a("UIIZ")),g=s(a("q76B")),b=s(a("puxM")),M=s(a("FEcc")),v=a("DrY4"),_=(r=(0,m.connect)(e=>{var t=e.teamControl,a=e.loading;return{regions:t.regions,currentTeam:t.currentTeam,toMoveTeamLoading:a.effects["teamControl/moveTeam"]}}),r((n=class extends c.PureComponent{constructor(e){super(e),this.getInitializeVal=(()=>{var e=h.default.getCurrTeamName();(0,v.gitAuthorizationMessage)({team_name:e}).then(e=>{this.setState({list:e&&e.list})})}),this.onMoveTeam=(e=>{this.setState({toMoveTeam:e})}),this.onDelMember=(e=>{this.setState({toDeleteMember:e})}),this.onEditAction=(e=>{this.setState({toEditAction:e})}),this.hideMoveTeam=(()=>{this.setState({toMoveTeam:null})}),this.hideEditAction=(()=>{this.setState({toEditAction:null})}),this.handleEditAction=(e=>{var t=this.state.toEditAction;(0,v.editAuthorizationMessage)({team_name:h.default.getCurrTeamName(),secret_id:t.secret_id,username:e.username,password:e.password}).then(e=>{e&&e.response_data&&200==e.response_data.code?(d.default.success({message:(0,u.formatMessage)({id:"notification.success.change"})}),this.getInitializeVal()):d.default.error({message:(0,u.formatMessage)({id:"notification.error.change"})}),this.setState({toEditAction:null})})}),this.showAddMember=(()=>{this.setState({showAddMember:!0})}),this.hideAddMember=(()=>{this.setState({showAddMember:!1})}),this.handleAddMember=(e=>{(0,v.addAuthorizationMessage)({team_name:h.default.getCurrTeamName(),domain:e.domain,username:e.username,password:e.password}).then(e=>{e&&e.response_data&&200==e.response_data.code?(d.default.success({message:(0,u.formatMessage)({id:"notification.success.add"})}),this.getInitializeVal()):d.default.error({message:(0,u.formatMessage)({id:"notification.error.add"})}),this.setState({showAddMember:!1})})}),this.hideDelMember=(()=>{this.setState({toDeleteMember:null})}),this.handleDelMember=(()=>{var e=this.state.toDeleteMember;(0,v.delAuthorizationMessage)({team_name:h.default.getCurrTeamName(),secret_id:e.secret_id}).then(e=>{e&&e.response_data&&200==e.response_data.code?(d.default.success({message:(0,u.formatMessage)({id:"notification.success.delete"})}),this.getInitializeVal()):d.default.error({message:(0,u.formatMessage)({id:"notification.error.delete"})}),this.setState({toDeleteMember:null})})}),this.state={showAddMember:!1,toDeleteMember:null,toMoveTeam:null,page:1,pageSize:8,total:0,list:[]}}componentDidMount(){this.getInitializeVal()}render(){var e=this.props,t=e.currentTeam,a=e.memberPermissions,s=(e.toMoveTeamLoading,e.memberPermissions),i=s.isCreate,r=(s.isAccess,this.state),o=(r.page,r.pageSize,r.total,r.showAddMember),n=(r.members,r.roles),d=r.toEditAction,m=r.toDeleteMember,h=(r.toMoveTeam,r.list);return c.default.createElement("div",null,c.default.createElement(l.default,{style:{marginBottom:24},bodyStyle:{paddingTop:12},title:(0,u.formatMessage)({id:"teamManage.tabs.image"}),extra:i&&c.default.createElement("a",{href:"javascript:;",onClick:this.showAddMember},(0,u.formatMessage)({id:"teamManage.tabs.image.table.btn.add"}))},c.default.createElement(b.default,{sm:600},c.default.createElement(M.default,{memberPermissions:a,team:t,onMoveTeam:this.onMoveTeam,onDelete:this.onDelMember,onEditAction:this.onEditAction,list:h}))),o&&c.default.createElement(p.default,{roles:n,onOk:this.handleAddMember,onCancel:this.hideAddMember}),d&&c.default.createElement(f.default,{roles:n,data:d,onOk:this.handleEditAction,onCancel:this.hideEditAction}),m&&c.default.createElement(g.default,{onOk:this.handleDelMember,title:(0,u.formatMessage)({id:"confirmModal.image_warehouse.delete.title"}),subDesc:(0,u.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,u.formatMessage)({id:"confirmModal.delete.image_warehouse.desc"}),onCancel:this.hideDelMember}))}},o=n))||o);t.default=_},PVYy:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("R9oj");var l=s(a("ECub"));a("+L6B");var r=s(a("2/Rp"));a("T2oS");var o=s(a("W9HT"));a("Pwec");var n=s(a("CtXQ"));a("Znn+");var d=s(a("ZTPi"));a("lUTK");var m,c,u,h=s(a("BvKs")),p=a("MuoO"),f=i(a("q1tI")),g=a("LLXN"),b=s(a("QDog")),M=s(a("hMqj")),v=s(a("q76B")),_=s(a("8+Sn")),E=s(a("CXnr")),C=s(a("CEQl")),y=h.default.Item,R=d.default.TabPane,T=(m=(0,p.connect)(e=>{var t=e.teamControl,a=e.loading;return{teamControl:t,activitiesLoading:a.effects["activities/fetchList"]}}),m((u=class extends f.PureComponent{constructor(e){var t;super(e),t=this,this.onDelRole=(e=>{this.setState({deleteRole:e})}),this.showAddRole=(()=>{this.setState({showAddRole:!0})}),this.hideAddRole=(e=>{if(this.setState({showAddRole:!1}),e&&"number"===typeof e)return this.loadTeamRoles(e)}),this.handleDelRole=(()=>{this.props.dispatch({type:"teamControl/removeRole",payload:{team_name:b.default.getCurrTeamName(),role_id:this.state.deleteRole.ID},callback:()=>{this.hideDelRole(),this.loadTeamRoles()}})}),this.hideDelRole=(()=>{this.setState({deleteRole:null})}),this.loadTeamRoles=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t.props.dispatch;a({type:"teamControl/fetchTeamRoles",payload:{team_name:b.default.getCurrTeamName()},callback:a=>{if(a&&200===a.status_code){var s=null;a.list&&a.list.length>0&&(s=a.list[0].ID),t.setState({roleList:a.list,rolesID:e||s,rolesLoading:!1})}}})},this.loadPermissions=(()=>{var e=this.props.dispatch;e({type:"global/fetchPermissions",callback:e=>{e&&200===e.status_code&&this.setState({permissions:e.bean||[],permissionsLoading:!1})}})}),this.selectKey=(e=>{var t=e.key;this.setState({rolesID:t})}),this.state={showAddRole:!1,roleList:[],rolesID:null,rolesLoading:!0,permissions:null,permissionsLoading:!0,language:"zh-CN"===_.default.get("language")}}componentDidMount(){this.loadTeamRoles(),this.loadPermissions()}render(){var e=this.props.rolePermissions,t=e.isCreate,a=e.isEdit,s=e.isDelete,i=this.state,m=i.roleList,c=i.rolesLoading,u=i.permissions,p=i.permissionsLoading,b=i.showAddRole,_=i.rolesID,T=i.deleteRole,A=i.language,N=m&&m.length>0;return f.default.createElement(f.Fragment,null,f.default.createElement("div",{className:E.default.systemRoleWrapper},f.default.createElement("div",{className:E.default.systemRole},f.default.createElement("div",{className:E.default.systemRoleTitle},(0,g.formatMessage)({id:"teamManage.tabs.role.title"})),f.default.createElement(o.default,{spinning:c},f.default.createElement("div",{className:E.default.systemRoleList},N&&f.default.createElement(h.default,{mode:"inline",selectedKeys:["".concat(_)],onClick:this.selectKey,style:{borderTop:"1px solid #e8e8e8"}},m.map(e=>{var t=e.ID,a=e.name;return f.default.createElement(y,{key:t,className:E.default.roleName},f.default.createElement("div",null," ",M.default.actionMap(a,A)),s&&f.default.createElement(n.default,{type:"delete",onClick:()=>{this.onDelRole(e)}}))})))),f.default.createElement("div",{className:E.default.systemRoleBtn},!b&&t&&f.default.createElement(r.default,{type:"primary",onClick:this.showAddRole},(0,g.formatMessage)({id:"teamManage.tabs.role.btn.add"})))),f.default.createElement("div",{className:E.default.authSettingBody},f.default.createElement(d.default,{defaultActiveKey:"1"},f.default.createElement(R,{tab:(0,g.formatMessage)({id:"teamManage.tabs.role.list.permissions"}),key:"1"},N||p||b?f.default.createElement(C.default,{isEdit:a,isCreate:t,isAddRole:b,onCancelAddRole:this.hideAddRole,rolesID:_,roleList:m,permissions:u,permissionsLoading:p}):f.default.createElement("div",{className:E.default.noRole},f.default.createElement(l.default,{description:f.default.createElement("span",null,(0,g.formatMessage)({id:"teamManage.tabs.role.null"}))})))))),T&&f.default.createElement(v.default,{onOk:this.handleDelRole,title:(0,g.formatMessage)({id:"confirmModal.role.delete.title"}),subDesc:(0,g.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,g.formatMessage)({id:"confirmModal.delete.role.desc"},{deleteRole:T.name}),onCancel:this.hideDelRole}))}},c=u))||c);t.default=T},T1ah:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var l=s(a("2/Rp"));a("Pwec");var r=s(a("CtXQ"));a("Telt");var o,n,d,m=s(a("Tckk")),c=s(a("p0pE")),u=a("MuoO"),h=a("7DNP"),p=s(a("wd/R")),f=i(a("q1tI")),g=a("LLXN"),b=(s(a("IzeZ")),s(a("q76B"))),M=s(a("2inB")),v=s(a("69fC")),_=s(a("1TN1")),E=s(a("PVYy")),C=s(a("LiPW")),y=s(a("XZXw")),R=a("vSx2"),T=s(a("QDog")),A=s(a("hMqj")),N=s(a("zcww")),S=s(a("mzlC")),D=s(a("4OG1")),L=(o=(0,u.connect)(e=>{var t=e.user,a=e.teamControl,s=e.loading,i=e.enterprise;return{currUser:t.currentUser,teamControl:a,projectLoading:s.effects["project/fetchNotice"],activitiesLoading:s.effects["activities/fetchList"],currentTeam:a.currentTeam,currentRegionName:a.currentRegionName,currentEnterprise:i.currentEnterprise,currentTeamPermissionsInfo:a.currentTeamPermissionsInfo}}),o((d=class extends f.PureComponent{constructor(e){super(e),this.loadOverview=(()=>{var e=this.props.dispatch;e({type:"index/fetchOverview",payload:{team_name:T.default.getCurrTeamName(),region_name:T.default.getCurrRegionName()},callback:e=>{e&&this.setState({logoInfo:e.bean.logo})},handleError:()=>{}})}),this.handleEventPermissions=(e=>{var t=this.props.currentTeamPermissionsInfo;return A.default.queryTeamBasicInfo(t,e)}),this.handlePermissions=(e=>{var t=this.props.currentTeamPermissionsInfo;return A.default.querySpecifiedPermissionsInfo(t,e)}),this.showEditName=(()=>{this.setState({showEditName:!0})}),this.hideEditName=(()=>{this.setState({showEditName:!1})}),this.showExitTeam=(()=>{this.setState({showExitTeam:!0})}),this.hideExitTeam=(()=>{this.setState({showExitTeam:!1})}),this.handleExitTeam=(()=>{var e=this.props.dispatch,t=this.state.teamsUrl;e({type:"teamControl/exitTeam",payload:{team_name:T.default.getCurrTeamName()},callback:a=>{a&&200===a.status_code&&e(h.routerRedux.push(t))}})}),this.showDelTeam=(()=>{this.setState({showDelTeam:!0})}),this.hideDelTeam=(()=>{this.setState({showDelTeam:!1})}),this.handleEditName=(e=>{this.props.dispatch({type:"teamControl/editTeamAlias",payload:(0,c.default)({team_name:T.default.getCurrTeamName()},e),callback:()=>{this.props.dispatch({type:"user/fetchCurrent"}),this.loadOverview(),this.hideEditName(),this.handleUpDataHeader()}})}),this.handleUpDataHeader=(()=>{var e=this.props.dispatch;e({type:"global/IsUpDataHeader",payload:{isUpData:!0}})}),this.handleDelTeam=(()=>{var e=this.state.teamsUrl,t=this.props.dispatch;t({type:"teamControl/delTeam",payload:{team_name:T.default.getCurrTeamName()},callback:a=>{a&&200===a.status_code&&t(h.routerRedux.push(e))}})}),this.handleTabChange=(e=>{this.setState({scope:e})}),this.state={showEditName:!1,showDelTeam:!1,showExitTeam:!1,scope:"",teamsUrl:this.props.currentEnterprise?"/enterprise/".concat(this.props.currentEnterprise.enterprise_id,"/teams"):"/",eventPermissions:this.handleEventPermissions("dynamic_describe"),memberPermissions:this.handlePermissions("queryTeamMemberInfo"),datecenterPermissions:this.handlePermissions("queryTeamRegionInfo"),rolePermissions:this.handlePermissions("queryTeamRolesInfo"),registryPermissions:this.handlePermissions("queryTeamRegistryAuth")}}componentWillMount(){var e=this.props.dispatch,t=this.state,a=t.eventPermissions,s=t.memberPermissions.isAccess,i=t.datecenterPermissions.isAccess,l=t.rolePermissions.isAccess;t.registryPermissions.isAccess;a||s||i||l||T.default.withoutPermission(e);var r="";r=a?"event":s?"member":i?"datecenter":"role",this.setState({scope:r});var o=this.props.location.state;o&&o.config&&this.setState({scope:o.config})}componentDidMount(){this.props.dispatch({type:"teamControl/fetchAllPerm"}),this.loadOverview()}getParam(){return this.props.match.params}render(){var e=this.props,t=e.currUser,a=e.currentEnterprise,s=e.currentTeam,i=e.currentRegionName,o=this.state,n=o.scope,d=o.showEditName,c=o.showDelTeam,u=o.showExitTeam,h=o.eventPermissions,T=o.memberPermissions,A=o.datecenterPermissions,L=o.rolePermissions,k=o.registryPermissions,w=o.memberPermissions.isAccess,I=o.datecenterPermissions.isAccess,P=o.rolePermissions.isAccess,x=o.registryPermissions.isAccess,j=(o.tabActiveKey,o.logoInfo),O=void 0!==j&&j,z=f.default.createElement("div",{className:S.default.pageHeaderContent},f.default.createElement("div",{className:S.default.avatar},O?f.default.createElement(m.default,{size:"large",src:O}):f.default.createElement(m.default,{style:{backgroundColor:"#00a2ae",verticalAlign:"middle"},size:60,shape:"square"},f.default.createElement("span",{style:{color:"#fff",fontSize:35,textTransform:"uppercase"}},s.team_alias.substr(0,1)))),f.default.createElement("div",{className:S.default.content},f.default.createElement("div",{className:S.default.contentTitle},s.team_alias," ",N.default.canEditTeamName(s)&&f.default.createElement(r.default,{onClick:this.showEditName,type:"edit"})),f.default.createElement("div",null,(0,g.formatMessage)({id:"teamManage.create.time"}),(0,p.default)(s.create_time).locale("zh-cn").format("YYYY-MM-DD")))),U=N.default.canDeleteTeam(t),B=f.default.createElement("div",{className:S.default.extraContent},f.default.createElement("div",{className:S.default.extraBtns},!U&&f.default.createElement(l.default,{onClick:this.showExitTeam,type:"dashed"},(0,g.formatMessage)({id:"teamManage.tabs.exitTeam"})),f.default.createElement(l.default,{disabled:!U,onClick:this.showDelTeam,type:"dashed"},(0,g.formatMessage)({id:"teamManage.tabs.deleteTeam"})))),q=[];h&&q.push({key:"event",tab:(0,g.formatMessage)({id:"teamManage.tabs.dynamic"})}),w&&q.push({key:"member",tab:(0,g.formatMessage)({id:"teamManage.tabs.member"})}),I&&q.push({key:"datecenter",tab:(0,g.formatMessage)({id:"teamManage.tabs.cluster"})}),P&&q.push({key:"role",tab:(0,g.formatMessage)({id:"teamManage.tabs.role"})}),x&&q.push({key:"image",tab:(0,g.formatMessage)({id:"teamManage.tabs.image"})});var F=[];return F=(0,R.createTeam)((0,R.createEnterprise)(F,a),s,i),F.push({title:(0,g.formatMessage)({id:"teamManage.tabs.setting"})}),f.default.createElement(y.default,{breadcrumbList:F,tabList:q,tabActiveKey:n,onTabChange:this.handleTabChange,content:z,extraContent:B},"datecenter"===n&&f.default.createElement(M.default,{datecenterPermissions:A}),"member"===n&&f.default.createElement(_.default,{memberPermissions:T}),"role"===n&&f.default.createElement(E.default,{rolePermissions:L}),"event"===n&&h&&f.default.createElement(v.default,{memberPermissions:T}),"image"===n&&x&&f.default.createElement(C.default,{memberPermissions:k}),d&&f.default.createElement(D.default,{teamAlias:s.team_alias,imageUrlTeam:O,onSubmit:this.handleEditName,onCancel:this.hideEditName}),c&&f.default.createElement(b.default,{onOk:this.handleDelTeam,title:(0,g.formatMessage)({id:"confirmModal.quit.team.title"}),subDesc:(0,g.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,g.formatMessage)({id:"confirmModal.return.team.desc"}),onCancel:this.hideDelTeam}),u&&f.default.createElement(b.default,{onOk:this.handleExitTeam,title:(0,g.formatMessage)({id:"confirmModal.project_team_quit.delete.title"}),subDesc:(0,g.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,g.formatMessage)({id:"confirmModal.delete.project_team_quit.desc"}),onCancel:this.hideExitTeam}))}},n=d))||n);t.default=L},UIIZ:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var l=s(a("kLXV"));a("cWXX");var r=s(a("/ezw")),o=s(a("jehZ"));a("5NDa");var n=s(a("5rEg"));a("y8nQ");var d=s(a("Vl3Y"));a("OaEy");var m,c,u,h,p=s(a("2fM7")),f=(s(a("J5jb")),a("MuoO")),g=i(a("q1tI")),b=a("LLXN"),M=s(a("QDog")),v=(s(a("hMqj")),s(a("DG7E")),p.default.Option,d.default.Item),_=(m=d.default.create(),c=(0,f.connect)(),m(u=c((h=class extends g.PureComponent{constructor(e){super(e),this.fetchTeamUserRoles=(()=>{var e=this.props,t=e.dispatch,a=e.userId,s=e.eid,i=e.teamName;t({type:"teamControl/fetchUserTeamsRoles",payload:{tenantName:i,team_name:i,enterprise_id:s,user_id:a,page:1,page_size:-1},callback:e=>{this.setState({currentRoles:e.bean&&e.bean.roles||[]},()=>{this.handleCloseCurrentRolesLoading()})}})}),this.loadRoles=(()=>{var e=this.props,t=e.dispatch,a=e.teamName;t({type:"teamControl/fetchTeamRoles",payload:{team_name:a||M.default.getCurrTeamName(),page_size:-1,page:1},callback:e=>{this.setState({roles:e.list||[]},()=>{this.handleCloseRoleLoading()})}})}),this.handleSubmit=(()=>{var e=this.props,t=e.form,a=e.onOk;t.validateFields((e,t)=>{!e&&a&&a(t)})}),this.handleCloseRoleLoading=(()=>{this.setState({roleLoading:!1})}),this.handleCloseCurrentRolesLoading=(()=>{this.setState({currentRolesLoading:!1})}),this.state={roles:[],currentRoles:[],roleLoading:!0,currentRolesLoading:!0}}componentDidMount(){this.loadRoles();var e=this.props,t=e.viewName,a=e.data;"enterprise"===t&&a&&a.roles&&a.roles.length>0?this.fetchTeamUserRoles():this.handleCloseCurrentRolesLoading()}render(){var e=this.props,t=e.onCancel,a=e.data,s=e.form,i=e.title,m=e.loading,c=s.getFieldDecorator,u=this.state,h=(u.roles,u.currentRoles),p=u.roleLoading,f=u.currentRolesLoading,M=[],_=h&&h.length>0&&h||a&&a.roles&&a.roles.length>0&&a.roles||[];_.map(e=>{e.role_id&&M.push(Number(e.role_id))});var E={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return g.default.createElement(l.default,{confirmLoading:m,title:i||(a?(0,b.formatMessage)({id:"confirmModal.edit.image.title"}):(0,b.formatMessage)({id:"confirmModal.add.image.title"})),visible:!0,onOk:this.handleSubmit,onCancel:t},g.default.createElement(r.default,{loading:p||f},g.default.createElement(d.default,{onSubmit:this.handleSubmit},g.default.createElement(v,(0,o.default)({},E,{label:(0,b.formatMessage)({id:"confirmModal.image.lable.username"})}),c("username",{initialValue:a.username||"",rules:[{required:!0,message:(0,b.formatMessage)({id:"placeholder.userName"})},{max:255,message:(0,b.formatMessage)({id:"placeholder.max255"})}]})(g.default.createElement(n.default,{placeholder:(0,b.formatMessage)({id:"placeholder.userName"})}))),g.default.createElement(v,(0,o.default)({},E,{label:(0,b.formatMessage)({id:"confirmModal.image.lable.password"})}),c("password",{initialValue:a.password||"",rules:[{required:!0,message:(0,b.formatMessage)({id:"placeholder.password_1"})},{max:255,message:(0,b.formatMessage)({id:"placeholder.max255"})}]})(g.default.createElement(n.default,{placeholder:(0,b.formatMessage)({id:"placeholder.password_1"}),type:"password"}))))))}},u=h))||u)||u),E=_;t.default=E},XZTq:function(e,t,a){e.exports={nameID:"nameID___mjeTv",icon:"icon___2qJef",iconm:"iconm___1egs4",projectList:"projectList___3NjmB",cardTitle:"cardTitle___175nG",projectGrid:"projectGrid___1Uvu0",projectItemContent:"projectItemContent___3V0J4",datetime:"datetime___1PUaI"}},ck6v:function(e,t,a){e.exports={nameID:"nameID___1vhpm",icon:"icon___3m2j5",iconm:"iconm___3XT2O",activitiesList:"activitiesList___1UL9h",username:"username___2IePj",event:"event___1khhW",pageHeaderContent:"pageHeaderContent___3x0yD",avatar:"avatar___3sxRb",content:"content___1yF-R",contentTitle:"contentTitle___tqx2z",extraContent:"extraContent___2ASE1",statItem:"statItem___2-aLt",extraBtns:"extraBtns___z9NVU",members:"members___3MVUR",member:"member___3EwYc",projectList:"projectList___NGWfL",cardTitle:"cardTitle___1ElDp",projectGrid:"projectGrid___14c51",projectItemContent:"projectItemContent___3zMY4",datetime:"datetime___3zIEP",eventStatus:"eventStatus___3tQNy",datatime_float:"datatime_float___3jO9v",activeCard:"activeCard___2eWRL",tableList:"tableList___2kiaw",tableListOperator:"tableListOperator___3o_rz",tableListForm:"tableListForm___SUb2s",submitButtons:"submitButtons___3X9YA"}},mzlC:function(e,t,a){e.exports={nameID:"nameID___3LtGN",icon:"icon___1Pqh3",iconm:"iconm___3CAY7",activitiesList:"activitiesList___2EDh5",username:"username___1HTAc",event:"event___3HDPV",pageHeaderContent:"pageHeaderContent___2cxSM",avatar:"avatar___mCYpg",content:"content___3TccU",contentTitle:"contentTitle___2wrqz",extraContent:"extraContent___1KGdJ",statItem:"statItem___1H4NU",extraBtns:"extraBtns___1ZX24",members:"members___3zFaQ",member:"member___2YSMN",projectList:"projectList___3f2yo",cardTitle:"cardTitle___2hili",projectGrid:"projectGrid___3TTk_",projectItemContent:"projectItemContent___9scnQ",datetime:"datetime___3LV_M",eventStatus:"eventStatus___2NYEF",activeCard:"activeCard___3tuU1",tableList:"tableList___2B8_s",tableListOperator:"tableListOperator___vZlmN",tableListForm:"tableListForm___26-Xb",submitButtons:"submitButtons___2a5jy",conformDesc:"conformDesc___2QAdi"}},nqg8:function(e,t,a){"use strict";var s=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=i(a("wCAj")),r=s(a("q1tI")),o=a("LLXN"),n=i(a("zcww")),d=i(a("8+Sn")),m=i(a("hMqj"));class c extends r.PureComponent{render(){var e=this.props,t=e.list,a=e.pagination,s=e.onDelete,i=e.onEditAction,c=e.onMoveTeam,u=e.memberPermissions,h=u.isEdit,p=u.isDelete,f=e.team,g=[{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.userName"}),dataIndex:"nick_name"},{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.email"}),dataIndex:"email"},{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.role"}),dataIndex:"roles",render(e){return r.default.createElement("span",null,(e||[]).map(e=>{return r.default.createElement("span",{style:{marginRight:"8px"},key:"role".concat(e.role_id)},m.default.actionMap(e.role_name,"zh-CN"===d.default.get("language")))}))}},{title:(0,o.formatMessage)({id:"teamManage.tabs.member.table.operate"}),dataIndex:"action",render(e,t){return r.default.createElement("div",null,p&&r.default.createElement("a",{href:"javascript:;",onClick:()=>{s(t)}},(0,o.formatMessage)({id:"teamManage.tabs.member.table.delete"})),h&&r.default.createElement("a",{style:{marginLeft:6},onClick:()=>{i(t)},href:"javascript:;"},(0,o.formatMessage)({id:"teamManage.tabs.member.table.editRole"})),n.default.canChangeOwner(f)&&r.default.createElement("a",{style:{marginLeft:6},onClick:()=>{c(t)},href:"javascript:;"},(0,o.formatMessage)({id:"teamManage.tabs.member.table.turnOver"})))}}];return r.default.createElement(l.default,{pagination:a,dataSource:t,columns:g})}}var u=c;t.default=u}}]);
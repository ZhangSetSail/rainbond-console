(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"1cUz":function(e,t,a){e.exports={antd_row:"antd_row___22Eih",antd_form:"antd_form___3vT_u",antd_row_btn:"antd_row_btn___M_ybW",antd_btn:"antd_btn___HnUHl",lists:"lists___PLy7p"}},tYjc:function(e,t,a){"use strict";var s=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var n=s(a("W9HT"));a("IzEo");var o=s(a("bx4M"));a("14J3");var i=s(a("BMrR"));a("+L6B");var l=s(a("2/Rp"));a("FJo9");var d=s(a("L41K"));a("y8nQ");var u,c,p,f,m=s(a("Vl3Y")),h=a("MuoO"),g=a("7DNP"),y=s(a("Qyje")),_=r(a("q1tI")),v=a("LLXN"),b=s(a("2lxJ")),k=s(a("3a4m")),C=s(a("ALo4")),E=s(a("XZXw")),M=s(a("+iC2")),L=s(a("1cUz")),x=(m.default.Item,d.default.Step),S=(u=m.default.create(),c=(0,h.connect)(e=>{var t=e.user,a=e.list,s=e.loading,r=e.global,n=e.index;return{user:t.currentUser,list:a,loading:s.models.list,rainbondInfo:r.rainbondInfo,enterprise:r.enterprise,isRegist:r.isRegist,oauthLongin:s.effects["global/creatOauth"],overviewInfo:n.overviewInfo}}),u(p=c((f=class extends _.PureComponent{constructor(e){super(e),this.getRegionLength=(()=>{var e=this.props,t=e.dispatch,a=e.match.params.eid,s=this.state.token;t({type:"region/fetchHelmJoinStatus",payload:{eid:a,token:s},callback:e=>{200===e.status_code&&this.setState({flagStatus:!0,status:e.response_data.msg})}})}),this.loadSteps=(()=>{var e=[{title:(0,v.formatMessage)({id:"enterpriseColony.ACksterList.basic"})},{title:(0,v.formatMessage)({id:"enterpriseColony.ACksterList.senior"})},{title:(0,v.formatMessage)({id:"enterpriseColony.ACksterList.install"})},{title:(0,v.formatMessage)({id:"enterpriseColony.ACksterList.Docking"})}];return e}),this.toLinkNext=(e=>{var t=this.props,a=t.dispatch,s=t.match.params.eid,r=this.state,n=r.data,o=r.copy,i=r.token,l=r.name,d=r.step;"install"===e?k.default.push({pathname:"/enterprise/".concat(s,"/provider/ACksterList/install"),search:y.default.stringify({data:n,copy:o,token:i,name:l,step:d,isResult:!0})}):"finish"===e?a(g.routerRedux.push("/enterprise/".concat(s,"/clusters"))):"next"===e&&a(g.routerRedux.push("/enterprise/".concat(s,"/importMessage?region_id=")))}),this.refreshStatus=(()=>{this.setState({flagStatus:!1}),this.getRegionLength()}),this.renderBody=(()=>{var e=this.state.status,t="",a="",s="",r=[];return"success"===e&&(t="success",a="".concat((0,v.formatMessage)({id:"enterpriseColony.cloud.success"})),s="".concat((0,v.formatMessage)({id:"enterpriseColony.cloud.back"})),r=[_.default.createElement(l.default,{className:L.default.antd_btn,onClick:()=>{this.toLinkNext("finish")},type:"primary"},_.default.createElement(v.FormattedMessage,{id:"enterpriseColony.cloud.return"})),_.default.createElement(l.default,{className:L.default.antd_btn,onClick:()=>{this.toLinkNext("next")},type:"primary"},_.default.createElement(v.FormattedMessage,{id:"enterpriseColony.cloud.import"}))]),"failed"===e&&(t="error",a="".concat((0,v.formatMessage)({id:"enterpriseColony.cloud.fail"})),s="".concat((0,v.formatMessage)({id:"enterpriseColony.cloud.Refresh"})),r=[_.default.createElement(l.default,{className:L.default.antd_btn,onClick:()=>{this.toLinkNext("install")},type:"primary"},_.default.createElement(v.FormattedMessage,{id:"button.previous"})),_.default.createElement(l.default,{onClick:()=>{this.refreshStatus()},className:L.default.antd_btn,type:"primary"},_.default.createElement(v.FormattedMessage,{id:"enterpriseColony.cloud.speed"}))]),_.default.createElement(C.default,{className:L.default.lists,type:t,title:a,actions:r,description:_.default.createElement("div",null,s)})});var t=this.props,a=t.user,s=t.location.search,r=y.default.parse(s.substr(1))||{},n=r.data,o=r.token,i=r.copy,d=r.name,u=r.step,c=M.default.isCompanyAdmin(a);this.state={adminer:c,status:"failed",flagStatus:!1,data:n,token:o,copy:i,name:d,step:u}}componentWillMount(){var e=this.state.adminer,t=this.props.dispatch;e||t(g.routerRedux.push("/"))}componentDidMount(){this.getRegionLength()}render(){var e=this.props.match.params,t=(e.eid,e.provider,e.clusterID,this.state.flagStatus);this.props.form.getFieldDecorator;return _.default.createElement(E.default,{title:_.default.createElement(v.FormattedMessage,{id:"enterpriseColony.button.text"}),content:_.default.createElement(v.FormattedMessage,{id:"enterpriseColony.PageHeaderLayout.content"}),titleSvg:b.default.getSvg("clusterSvg",18)},_.default.createElement(i.default,{style:{marginBottom:"16px"}},_.default.createElement(d.default,{current:3},this.loadSteps().map(e=>_.default.createElement(x,{key:e.title,title:e.title})))),_.default.createElement(o.default,{style:{padding:"24px"}},!t&&_.default.createElement(n.default,{tip:"Loading..."},_.default.createElement(o.default,{bordered:!1},this.renderBody())),t&&_.default.createElement(o.default,{bordered:!1},this.renderBody())))}},p=f))||p)||p);t.default=S}}]);